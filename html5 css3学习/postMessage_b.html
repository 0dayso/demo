<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Html5 postMessage数据传递</title>
	<style>
	html,body{ height: 100%; margin: 0;}
	</style>
</head>
<body style="height:100%">
	<div id="div2" style="width:100%; height:100%; background:red;">click to change color</div>
	<script>
	var div2 = document.getElementById('div2');
	//监听message事件
	window.addEventListener('message',function(e) {
		if (e.source != window.parent) return;
		var color = div2.style.backgroundColor;
		window.parent.postMessage(color,'*');	//返回数据到主页面
	},false)

	div2.addEventListener('click',function() {
		this.style.backgroundColor = this.style.backgroundColor == 'red' ? 'green' : 'red';
		var color = div2.style.backgroundColor;
		window.parent.postMessage(color,'*');
	},false)

	</script>
</body>
</html>